{
  "Name": "debian-11-worker-import-test",
  "Vars": {
    "image_name": {
      "Value": "debian-11-worker-import-test-${ID}"
    },
    "source_disk_file": {
      "Value": "gs://compute-image-import-test-resources/xenial-server-cloudimg-amd64-disk1.vmdk"
    },
    "image_prefix": {
      "Value": "debian-11-worker",
      "Description": "Prefix for the created image."
    },
    "project_id": {
      "Value": "compute-image-import-test",
      "Description": "Project of Debian worker image"
    },
    "build_date": {
      "Value": "${DATE}",
      "Description": "Build datestamp used to version the image."
    }
  },
  "Steps": {
    "delete-image": {
      "DeleteResources": {
        "Images": [
          "${image_name}"
        ]
      }
    },
    "import-image": {
      "Timeout": "30m",
      "IncludeWorkflow": {
        "Path": "../daisy_workflows/image_import/import_image.wf.json",
        "Vars": {
          "image_name": "${image_name}",
          "importer_instance_disk_size": "200",
          "source_disk_file": "${source_disk_file}",
          "import_instance_disk_image": "projects/${project_id}/global/images/${image_prefix}-v${DATE}"
        }
      }
    }
  },
  "Dependencies": {
    "delete-image": [
      "import-image"
    ]
  }
}
